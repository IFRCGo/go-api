# Generated by Django 3.2.23 on 2024-01-15 16:24

import django.contrib.gis.db.models.fields
import django.core.validators
from django.db import migrations, models
import django.db.models.deletion
from django.core.management import call_command


class Migration(migrations.Migration):

    def forwards_func(apps, schema_editor):
        print('forwards')
        call_command('loaddata', 'delegation_office_types.json', verbosity=2)

    def reverse_func(apps, schema_editor):
        print('reverse')
        model = apps.get_model('local_units', 'delegationofficetype')
        model.objects.all().delete()


    dependencies = [
        ('api', '0187_auto_20231218_0508'),
        ('local_units', '0004_auto_20231127_1500'),
    ]

    operations = [
        migrations.CreateModel(
            name='DelegationOfficeType',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('code', models.IntegerField(validators=[django.core.validators.MaxValueValidator(10), django.core.validators.MinValueValidator(0)], verbose_name='Type Code')),
                ('name', models.CharField(max_length=100, verbose_name='Name')),
            ],
        ),
        migrations.CreateModel(
            name='DelegationOffice',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('name', models.CharField(max_length=255, verbose_name='Name')),
                ('city', models.CharField(blank=True, max_length=500, null=True, verbose_name='City')),
                ('address', models.CharField(blank=True, max_length=500, null=True, verbose_name='Address')),
                ('postcode', models.CharField(blank=True, max_length=20, null=True, verbose_name='Postal code')),
                ('location', django.contrib.gis.db.models.fields.PointField(srid=4326)),
                ('society_url', models.URLField(blank=True, max_length=255, null=True, verbose_name='URL of national society')),
                ('url_ifrc', models.URLField(blank=True, max_length=255, null=True, verbose_name='URL on IFRC webpage')),
                ('hod_first_name', models.CharField(blank=True, max_length=255, null=True, verbose_name='HOD first name')),
                ('hod_last_name', models.CharField(blank=True, max_length=255, null=True, verbose_name='HOD last name')),
                ('hod_mobile_number', models.CharField(blank=True, max_length=255, null=True, verbose_name='HOD mobile number')),
                ('hod_email', models.EmailField(blank=True, max_length=255, null=True, verbose_name='HOD Email')),
                ('assistant_name', models.CharField(blank=True, max_length=255, null=True, verbose_name='Assistant name')),
                ('assistant_email', models.EmailField(blank=True, max_length=255, null=True, verbose_name='Assistant email')),
                ('is_ns_same_location', models.BooleanField(default=False, verbose_name='NS on same location?')),
                ('is_multiple_ifrc_offices', models.BooleanField(default=False, verbose_name='Multiple IFRC offices?')),
                ('is_public', models.BooleanField(default=False, verbose_name='Is public?')),
                ('created_at', models.DateTimeField(auto_now=True, verbose_name='Created at')),
                ('modified_at', models.DateTimeField(auto_now=True, verbose_name='Modified at')),
                ('date_of_data', models.DateField(blank=True, null=True, verbose_name='Date of data collection')),
                ('country', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='delegation_office_country', to='api.country', verbose_name='Country')),
                ('dotype', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='delegation_office_type', to='local_units.delegationofficetype', verbose_name='Type')),
            ],
        ),
        migrations.RunPython(forwards_func, reverse_func, elidable=True),
    ]
