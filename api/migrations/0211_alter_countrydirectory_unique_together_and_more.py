# Generated by Django 4.2.13 on 2024-07-09 04:48

from django.db import migrations


def delete_ids(apps, schema_editor):
    CountryDirectory = apps.get_model("api", "CountryDirectory")
    CountryKeyDocument = apps.get_model("api", "CountryKeyDocument")
    NSDInitiatives = apps.get_model("api", "NSDInitiatives")
    try:
        CountryDirectory.objects.all().delete()
        CountryKeyDocument.objects.all().delete()
        NSDInitiatives.objects.all().delete()
    except Exception as e:
        print("Error while deleting ids", str(e))


class Migration(migrations.Migration):

    dependencies = [
        ("api", "0210_profile_accepted_montandon_license_terms"),
    ]

    operations = [
        migrations.RunPython(delete_ids, reverse_code=migrations.RunPython.noop),
        migrations.AlterUniqueTogether(
            name="countrydirectory",
            unique_together={("country", "first_name", "last_name", "position")},
        ),
        migrations.AlterUniqueTogether(
            name="countrykeydocument",
            unique_together={("country", "url")},
        ),
        migrations.AlterUniqueTogether(
            name="nsdinitiatives",
            unique_together={("country", "year", "fund_type")},
        ),
    ]
